window.__require=function t(e,c,i){function o(n,r){if(!c[n]){if(!e[n]){var a=n.split("/");if(a=a[a.length-1],!e[a]){var h="function"==typeof __require&&__require;if(!r&&h)return h(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+n+"'")}}var d=c[n]={exports:{}};e[n][0].call(d.exports,function(t){return o(e[n][1][t]||t)},d,d.exports,t,e,c,i)}return c[n].exports}for(var s="function"==typeof __require&&__require,n=0;n<i.length;n++)o(i[n]);return o}({ctrl:[function(t,e,c){"use strict";cc._RF.push(e,"fdee0ImbwBPPZm2t2kzM8yy","ctrl"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.xSpeed=0,this.zSpeed=0,this.yrotation=0,this.rotationy=0,this.xray=0,this.zray=0,this.keydown=0,this.up=!1,this.down=!1,this.left=!1,this.right=!1,this.worldposition=cc.v3(0,0,0),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},start:function(){},onKeyDown:function(t){switch(this.keydown++,t.keyCode){case cc.macro.KEY.w:this.up=!0,this.zSpeed=-200;break;case cc.macro.KEY.s:this.down=!0,this.zSpeed=200;break;case cc.macro.KEY.a:this.left=!0,this.xSpeed=-200;break;case cc.macro.KEY.d:this.right=!0,this.xSpeed=200;break;case cc.macro.KEY.q:this.yrotation=-100;break;case cc.macro.KEY.e:this.yrotation=100}},onKeyUp:function(t){switch(this.keydown--,t.keyCode){case cc.macro.KEY.w:this.up=!1,this.zSpeed=0;break;case cc.macro.KEY.s:this.down=!1,this.zSpeed=0;break;case cc.macro.KEY.a:this.left=!1,this.xSpeed=0;break;case cc.macro.KEY.d:this.right=!1,this.xSpeed=0;break;case cc.macro.KEY.q:case cc.macro.KEY.e:this.yrotation=0}},update:function(t){if(0!=this.keydown){this.rotationy-=this.yrotation*t,this.node.eulerAngles=cc.v3(-9,this.rotationy,0),this.xray=-Math.sin(this.rotationy*Math.PI/180),this.zray=-Math.cos(this.rotationy*Math.PI/180),this.worldposition=cc.v3(this.node.x+480,961,this.node.z);var e={d:cc.v3(this.xray,0,this.zray),o:this.worldposition},c=cc.geomUtils.intersect.raycast(cc.director.getScene(),e);console.log(c);for(var i=0;i<c.length;i++)c[i].distance<100&&c[i].distance>5&&1==this.up&&(this.zSpeed=0);for(var o={d:cc.v3(-this.xray,0,-this.zray),o:this.worldposition},s=cc.geomUtils.intersect.raycast(cc.director.getScene(),o),n=0;n<s.length;n++)s[n].distance<100&&s[n].distance>5&&1==this.down&&(this.zSpeed=0);for(var r={d:cc.v3(-this.zray,0,-this.xray),o:this.worldposition},a=cc.geomUtils.intersect.raycast(cc.director.getScene(),r),h=0;h<a.length;h++)a[h].distance<100&&a[h].distance>5&&1==this.left&&(this.xSpeed=0);for(var d={d:cc.v3(this.zray,0,this.xray),o:this.worldposition},y=cc.geomUtils.intersect.raycast(cc.director.getScene(),d),p=0;p<y.length;p++)y[p].distance<100&&y[p].distance>5&&1==this.right&&(this.xSpeed=0);this.node.x+=(this.xSpeed*Math.cos(-this.node.eulerAngles.y*Math.PI/180)-this.zSpeed*Math.sin(-this.node.eulerAngles.y*Math.PI/180))*t,this.node.z+=(this.zSpeed*Math.cos(-this.node.eulerAngles.y*Math.PI/180)+this.xSpeed*Math.sin(-this.node.eulerAngles.y*Math.PI/180))*t}}}),cc._RF.pop()},{}],dooropen:[function(t,e,c){"use strict";cc._RF.push(e,"0ffc2jbrbhPpalnxqlXJehC","dooropen"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.action=!1},onDestroy:function(){},start:function(){},update:function(t){var e=cc.find("root/3dCamera"),c=this.node.position.sub(e.getPosition());c.x<300&&c.x>-300&&c.z<300&&c.z>-300&&this.dooropen()},dooropen:function(){var t=cc.callFunc(function(){this.action=!1},this);if(0==this.action){this.action=!0,cc.find("root/3dCamera/hand").getComponent(cc.Animation).play("metarig|opendoor").repeatCount=1;var e=this.node.getChildByName("Cube.001"),c=this.node.getChildByName("Cube");e.runAction(cc.sequence(cc.moveBy(2,cc.v2(-2,0)),cc.moveBy(2,cc.v2(0,0)),cc.moveBy(2,cc.v2(2,0)),t)),c.runAction(cc.sequence(cc.moveBy(2,cc.v2(2,0)),cc.moveBy(2,cc.v2(0,0)),cc.moveBy(2,cc.v2(-2,0))))}}}),cc._RF.pop()},{}]},{},["ctrl","dooropen"]);